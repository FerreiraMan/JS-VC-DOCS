post:
  summary: Products Update Price Feed
  operationId: post-feeds-products-price
  responses:
    '201':
      description: Created. The feed was successfully created
      content:
        application/json:
          schema:
            type: object
            x-examples:
              Example 1:
                feedId: 07c390ae-d58a-42a2-8ec6-5051bca19cab
            properties:
              feedId:
                type: string
                description: The Feed Id.
                format: uuid
            required:
              - feedId
          examples:
            Response - Payload Example:
              value:
                feedId: 07c390ae-d58a-42a2-8ec6-5051bca19cab
    '400':
      description: Bad Request. There was a problem with the request payload. Either a field is missing or a field type is not compliant with the contract.
    '401':
      description: Unauthorized. The client could not be correctly authenticated.
    '403':
      description: Forbidden. The client is authenticated but does not have permission to the endpoint.
    '404':
      description: Not Found. The URL or resource doesn't exist.
    '405':
      description: Method Not Allowed. The requested HTTP method is not allowed for the endpoint.
    '500':
      description: Internal Server Error. An unexpected internal error has occurred in the server.
    '501':
      description: Not Implemented. The Global Order Feature is not enabled.
  description: |-
    Request a new Feed of Products price update.

    **Limit of Records:** We should start with a limit of 1000 records because of the payload Size.

    **Reset Global Sale Price:** Reset/clean of the global sale price,  can be achieved by this endpoint, to achieve that, ***products.price.salePrice.value***, ***products.price.salePrice.startAt*** and ***products.price.salesPrice.endAt*** must be null (example of the request payload further).

    > ***_NOTE:_*** Global price overrides local prices if local prices are not present on payload.
  parameters:
    - schema:
        type: string
      in: header
      name: Authorization
      description: JWT Token generated by Keycloak and Application ID
      required: true
  requestBody:
    content:
      application/json:
        schema:
          type: object
          x-examples:
            Example 1:
              products:
                - sellerSku: '8682447314708'
                  id: 07c390ae-d58a-42a2-8ec6-5051bca18cab
                  category: 1017650 - Fashion / Women's Fashion / Clothing / Dresses
                  price:
                    currency: EGP
                    value: 62
                    salePrice:
                      value: 55
                      startAt: '2021-08-11 10:30'
                      endAt: '2030-08-07 10:30'
                  businessClients:
                    - businessClientCode: jumia-ma
                      price:
                        currency: EGP
                        value: 62
                        salePrice:
                          value: 55
                          startAt: '2021-08-11 10:30'
                          endAt: '2030-08-07 10:30'
                    - businessClientCode: jumia-dz
                      price:
                        currency: EGP
                        value: 82
                        salePrice:
                          value: 45
                          startAt: '2021-08-12 10:30'
                          endAt: '2030-08-08 10:30'
          properties:
            products:
              type: array
              description: List of Products to have the price updated.
              items:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: Product SID.Product SID.
                  sellerSku:
                    type: string
                    description: Seller SKU.
                  category:
                    type: number
                    description: Category of the product.
                  price:
                    type: object
                    required:
                      - value
                    properties:
                      currency:
                        type: string
                        description: Global price currency. (If empty USD is assumed by default)
                      value:
                        type: number
                        description: Global price value in refereed currency.
                      salePrice:
                        type: object
                        description: 'If all keys are null, sale price is reset'
                        properties:
                          value:
                            type: number
                            description: Global sale price in refereed currency.
                          startAt:
                            type: string
                            format: date
                            description: 'Global Sale Start date YYYY-MM-DD hh24:mm'
                          endAt:
                            type: string
                            format: date
                            description: 'Global Sale End date YYYY-MM-DD hh24:mm'
                  businessClients:
                    type: array
                    description: List of Business Clients
                    items:
                      type: object
                      properties:
                        businessClientCode:
                          type: string
                          description: Code of Business Client
                        price:
                          type: object
                          properties:
                            currency:
                              type: string
                              description: Price currency. (If empty USD is assumed by default)
                            value:
                              type: number
                              description: Price in refereed currency
                            salePrice:
                              type: object
                              properties:
                                value:
                                  type: number
                                  description: Sale price in refereed currency
                                startAt:
                                  type: string
                                  format: date
                                  description: 'Sale Start date YYYY-MM-DD hh24:mm'
                                endAt:
                                  type: string
                                  format: date
                                  description: 'Sale End date YYYY-MM-DD hh24:mm'
                required:
                  - id
                  - sellerSku
                  - price
        examples:
          Request - Payload Example:
            value:
              products:
                - sellerSku: '8682447314708'
                  id: 07c390ae-d58a-42a2-8ec6-5051bca18cab
                  category: 1017650 - Fashion / Women's Fashion / Clothing / Dresses
                  price:
                    currency: EGP
                    value: 62
                    salePrice:
                      value: 55
                      startAt: '2021-08-11 10:30'
                      endAt: '2030-08-07 10:30'
                  businessClients:
                    - businessClientCode: jumia-ma
                      price:
                        currency: EGP
                        value: 62
                        salePrice:
                          value: 55
                          startAt: '2021-08-11 10:30'
                          endAt: '2030-08-07 10:30'
                    - businessClientCode: jumia-dz
                      price:
                        currency: EGP
                        value: 82
                        salePrice:
                          value: 45
                          startAt: '2021-08-12 10:30'
                          endAt: '2030-08-08 10:30'
          Sale Price Reset Request - Payload Example:
            value:
              products:
                - sellerSku: '8682447314708'
                  id: 07c390ae-d58a-42a2-8ec6-5051bca18cab
                  category: 1017650 - Fashion / Women's Fashion / Clothing / Dresses
                  price:
                    currency: EGP
                    value: 62
                    salePrice:
                      value: null
                      startAt: null
                      endAt: null
  tags:
    - Product Information
  x-codeSamples:
    - lang: 'curl'
      source: 
        $ref: '../code-samples/curl/feeds@products@price.txt'      
    - lang: 'python'
      source: 
        $ref: '../code-samples/python/feeds@products@price.py'      
    - lang: 'java'
      source: 
        $ref: '../code-samples/java/feeds@products@price.java'      
    - lang: 'go'
      source: 
        $ref: '../code-samples/go/feeds@products@price.go'      
    - lang: 'php'
      source: 
        $ref: '../code-samples/php/feeds@products@price.php'      
